<!DOCTYPE html> 
<html> 
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>Pandoc, beamer, MAKE workflow</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
  <![endif]-->

  <link rel="icon" href="favicon.png" />
  <link rel="apple-touch-icon-precomposed" href="apple-touch-icon.png" />

  <!--Bootstrap css -->
  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css"/>
  <!-- Sticky footer  -->
  <link rel="stylesheet" type="text/css" href="/assets/css/sticky-footer-navbar.css" />
  <!--Main Heather Theme css -->
  <link rel="stylesheet" type="text/css" href="/assets/css/heather.css" />
  <!-- CSS for publication list -->
  <link rel="stylesheet" href="/assets/css/publications.css" type="text/css" />
  <link rel="stylesheet" href="/assets/css/posts.css" type="text/css" />
   <!-- CSS for Google Web Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Merriweather:400,700' rel='stylesheet' type='text/css'>
  <!-- Google code prettify -->
  <!--
  <script src="/assets/js/run_prettify.js?skin=desert"></script>
  -->
  <script src="/assets/js/prettify.js"></script>
  <link rel="stylesheet" type="text/css" href="/assets/css/prettify.css" />
  <!--
  <link rel="stylesheet" type="text/css" href="/assets/css/prettify.css" />
 -->
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53244112-1', 'auto');
    ga('send', 'pageview');

  </script>

  <!-- Script to use LaTeX code with MathJax  -->
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- CSS for flaticons -->
  <link rel="stylesheet" type="text/css" href="/assets/css/flaticon.css"> 
  <!-- Script for jQuery library -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <!-- Script for bootstrap js library -->
  <script src="/assets/js/bootstrap.min.js" type="text/javascript"></script>
  <!-- meta data -->
  <meta name="author" content="Rubén Hernández-Murillo">
  <meta name="description" content="Research, Writings + Code">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/">
</head>
<body>

<header> 
  <!-- 	
  <h1 class="h2 m-0"><a href="https://rubenhm.org">rubenhm.org</a></h1>
  <p>Research, Writings + Code</p> 
  -->

  <!-- Bootstrap navbar -->
  <nav class = "navbar navbar-default navbar-fixed-top" role="navigation">
   <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
   	<div class = "navbar-header">
   		<button type="button"  class = "navbar-toggle" data-toggle = "collapse" data-target = "#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>  
   			<span class = "icon-bar"></span>
   			<span class = "icon-bar"></span>
   			<span class = "icon-bar"></span>
   		</button>
      <a class = "navbar-brand" href ="https://rubenhm.org">rubenhm.org</a>
    </div>
    
    <!-- Collect the nav links, forms, and other content for toggling -->
   	<div class ="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
 			<ul class ="nav navbar-nav navbar-right">
 				<li ><a href = "/">Home</a></li>
 				<li><a href = "/cv/">CV</a></li>
 				<li class ="dropdown">
 					<a href ="#" class = "dropdown-toggle" data-toggle ="dropdown">Research <b class="caret"></b></a>
 					<ul class = "dropdown-menu">
 						<li><a href="/pubs/journal_articles/">Journal articles</a></li>
 						<li><a href="/pubs/fed_pubs/">Fed Pubs</a></li>
 						<li><a href="/pubs/commentary/">Commentary</a></li>
 						<li><a href="/pubs/working_papers/">Working papers</a></li>
 					</ul>
 				</li> 
 				<li><a href="/blog/">Blog</a></li>
        <li><a href="/news/">News</a></li>
        <li><a href="/about/">About</a></li>
 			</ul>
   	</div><!-- /.navbar-collapse -->
 </div><!-- /.container-fluid -->
</nav>	

</header>  

<div class="container">
    <div class="visible-print"> <!--Header for print version -->
            <h1 class="text-left">https://rubenhm.org/blog/</h1>
            <p class="lead text-left">Research, Writings + Code</p>
            <hr>
    </div>
        
    <h1><em>Coding Annoyances</em></h1>
        <hr>    
    <h1>Pandoc, beamer, MAKE workflow</h1>
  
    <p class="small gray"><time datetime="Aug 1, 2014">01 August 2014 • Rubén Hernández-Murillo • </time></p>
    <hr>
    <article class="post">

        <p>The goal is to produce a nicely formatted beamer presentation in pdf format without losing focus away from the slides content by constantly meddling with the latex styles.</p>

<p>The solution is to write the presentation core content in <code>markdown</code>, then process the file with <code>pandoc</code> to obtain the pdf using a <code>beamer</code> template, automating the process with <code>make</code>.</p>

<p>We require the following tools. (I won&#39;t discuss how to install them in this post.)</p>

<ol>
<li><p><a href="http://johnmacfarlane.net/pandoc/">Pandoc</a> is a tool used to convert files between different formats. In particular, it is great for converting markdown input files into LaTeX, html, pdf, or Word format, including beamer latex presentations.</p></li>
<li><p><a href="https://www.tug.org/texlive/">Texlive</a> is one of the many LaTeX system distributions, available for Linux and Windows.</p></li>
<li><p><a href="http://www.gnu.org/software/make/">Make</a> is a &quot;tool which controls the generation of executables and other non-source files of a program from the program&#39;s source files.&quot; In our case, we will use it to automate the generation of pdf files from a markdown source using texlive as the engine to compile the latex files.</p></li>
<li><p><a href="http://www.gnu.org/software/sed/">Sed</a> is a stream editor which operates on files. We will use it to automatically change strings of text using regular expressions.</p></li>
</ol>

<p>While <code>make</code> and <code>sed</code> are common tools in a Linux environment, the <a href="http://gnuwin32.sourceforge.net/">GnuWin32 project</a> provides alternatives for Windows.</p>

<h2>Steps</h2>

<ol>
<li>The core of the presentation is written in markdown. See <a href="http://rubenhm.org/downloads/blog/2014-08-01-pandoc-beamer-make-workflow/example_pres.md">example</a>.</li>
<li>This file is run through pandoc to generate a <code>tex</code> <a href="http://rubenhm.org/downloads/blog/2014-08-01-pandoc-beamer-make-workflow/example_pres.tex">file</a>.</li>
<li>The above tex file is embedded as input in a beamer presentation <a href="http://rubenhm.org/downloads/blog/2014-08-01-pandoc-beamer-make-workflow/presentation_example.tex">template</a>.</li>
<li>The presentation template file is finally processed by <code>xelatex</code> to generate a pdf <a href="http://rubenhm.org/downloads/blog/2014-08-01-pandoc-beamer-make-workflow/presentation_example.pdf">presentation</a>. 
We use <code>xelatex</code> because in Windows we can use TrueType fonts, for example <code>Calibri</code>. The example uses <code>Times New Roman</code>.</li>
<li>The entire process is automated with <code>make</code> (with optional use of <code>sed</code>).</li>
</ol>

<p>Running the following command in the command line will produce the final presentation pdf file and will clean up any auxiliary files, except for the intermediate tex files and the original markdown source.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">make FILE=example
</code></pre></div>
<p>To automate the process, the <code>make</code> command uses the following set of instructions from a file named <a href="http://rubenhm.org/downloads/blog/2014-08-01-pandoc-beamer-make-workflow/makefile">makefile</a>.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">FILE=
MDFILE=$(FILE)_pres
TEXFILE=presentation_$(FILE)
INPUTS=

all:  pdf; make clean

.PHONY: all clean

pdf:
    # Use pandoc to convert the main markdown source to latex
    pandoc $(MDFILE).md --slide-level 2 -t beamer -o $(MDFILE).tex
    # Use sed to replace a string in the latex file that sets spaces in itemize environment
    sed -i &quot;s/\\itemsep1pt\\parskip0pt\\parsep0pt/\\itemsep1.6pt\\parskip1.6pt\\parsep0pt/g&quot; $(MDFILE).tex
    # Apply xelatex twice to obtain the pdf
    xelatex $(TEXFILE).tex
    xelatex $(TEXFILE).tex  

# Remove unnecessary files
clean: 
    -rm -f $(TEXFILE).log $(TEXFILE).aux  $(TEXFILE).toc  $(TEXFILE).snm $(TEXFILE).nav $(TEXFILE).out $(TEXFILE).fdb_latemk $(TEXFILE).synctex.gz $(TEXFILE).fls
    -rm -f sed*.*
</code></pre></div>
<p>The <code>--slide-level 2</code> option indicates we can use <code>##</code> in the markdown file to generate new slides, and <code>###</code> to create subheadings inside a slide. A single <code>#</code> creates sections.</p>

<h2>Attributions</h2>

<p>This post is my implementation (really a simplified version) of this post in <a href="http://jeromyanglim.blogspot.com/2012/07/beamer-pandoc-markdown.html">Jeromy Anglim&#39;s blog</a>.</p>

<p>Pictures used in the example are attributed to <a href="http://placekitten.com/attribution.html">placekitten.com</a>.</p>


    </article>
    <hr>
        <div class="row hidden-print">
        <div class="col-md-6">
            <p>If you enjoyed this article, consider sharing it.</p>
            <p><a href="https://twitter.com/intent/tweet?text=Pandoc, beamer, MAKE workflow&url=https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/&via=rubenhm_org" title="Share link on Twitter"><span class="flaticon-social19"></span></a>
            <a  href="https://plus.google.com/share?url=https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/" title="Share link on G+"><span class="flaticon-google23"></span></a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/" title="Share link on FB"><span class="flaticon-facebook29"></span></a>
            <a href="mailto:?Subject=Pandoc, beamer, MAKE workflow&amp;Body=https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/" title="Share link by email"><span class="flaticon-opened4"></span></a>
            <a href="/downloads/blog/2014-08-01-pandoc-beamer-make-workflow/2014-08-01-pandoc-beamer-make-workflow.pdf" title="Download PDF"><span class="flaticon-adobe21"></span></a></p>
            
            <!-- <a><span class="flaticon-printer70"></span></a> -->
        </div>
        <div class="col-md-6">
            <p>Follow for updates.</p>
            <p><a href="/feed.xml" title="Subscribe to Blog Feed"><span class="flaticon-rss8"></span></a> 
            <a href="http://twitter.com/intent/follow?screen_name=rubenhm_org" title="Follow on Twitter"><span class="flaticon-social19"></span></a></p>
        </div>
    </div>
    <hr>

    <div class="visible-print">
            <p><small>Follow for updates.</small></p>
            <p><a href="https://rubenhm.org/feed.xml" title="Subscribe to Blog Feed"><span class="flaticon-rss8"></span></a> 
            <span class="flaticon-social19"></span> @rubenhm_org</a></p>
            <hr>
    </div>
    <div class="hidden-print">
        <h2>Comments section</h2>
        <div class="alert alert-info" role="alert"> 
        <p><span class="flaticon-info12"></span> <strong>Rules:</strong> This forum is intended for a collegial discussion on economics and research tools. <br/>
            All comments will be initially withheld and promptly moderated prior to posting. Comments will be posted if they are done in a respectful and courteous manner.  
            We reserve the right to remove or not publish inappropriate comments.</p>
        </div>
   
        <hr>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'rubenhm'; // required: replace example with your forum shortnam
        var disqus_identifier = '/blog/2014/08/01/pandoc-beamer-make-workflow/';
        var disqus_url = 'https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">   comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>
</div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'rubenhm'; // required: replace example with your forum shortname
    var disqus_identifier = '/blog/2014/08/01/pandoc-beamer-make-workflow/';
    var disqus_url = 'https://rubenhm.org/blog/2014/08/01/pandoc-beamer-make-workflow/';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    
<!-- Script to fix <pre> tag to highlight code -->
<script type="text/javascript">
    $(document).ready(function(){
    $("pre").addClass("prettyprint linenums");
     prettyPrint();
});
</script>
</body>
</html>
